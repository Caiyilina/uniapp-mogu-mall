import{r as e,o as t,c as s,w as i,a,F as r,b as o,n as l,d as n,e as d,t as c,i as h,f as u,g as m,h as g,j as p,k as f,l as _,m as b,p as w,q as k,s as y,u as C,S as v,v as I,x,y as B,z as D,A as q}from"./index-CmE0f1Rq.js";import{_ as H}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{o as j,a as S,r as $}from"./uni-app.es.DRFLrC22.js";const F=H({__name:"tab-control",props:{titles:{type:Array,default:()=>[]}},emits:["itemClick"],setup(m,{emit:g}){const p=g,f=e(0);return(e,g)=>{const _=h,b=u;return t(),s(b,{class:"tab-control"},{default:i((()=>[(t(!0),a(r,null,o(m.titles,((e,a)=>(t(),s(b,{key:e,class:l(["item",f.value===a?"active":""]),onClick:t=>((e,t)=>{f.value=t,p("itemClick",e,t)})(e,a)},{default:i((()=>[n(_,{class:"title"},{default:i((()=>[d(c(e),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})}}},[["__scopeId","data-v-b2252c7c"]]),M=H({__name:"grid-view-item",props:{item:{type:Object,default:()=>{}}},emits:["itemClick"],setup(e,{emit:a}){const r=e,o=a,l=()=>{o("itemClick",r.item)};return(a,r)=>{const o=u,_=h,b=f,w=m("lazy");return t(),s(o,{class:"goods-item",onClick:l},{default:i((()=>[g(p("img",{class:"image"},null,512),[[w,e.item.show.img]]),n(o,{class:"desc-info"},{default:i((()=>[n(o,{class:"title"},{default:i((()=>[d(c(e.item.title),1)])),_:1}),n(o,{class:"info"},{default:i((()=>[n(_,{class:"price"},{default:i((()=>[d("￥"+c(e.item.price),1)])),_:1}),n(b,{class:"icon",src:"/assets/favor-FDHfHSXi.png",mode:""}),n(_,{class:"favorNum"},{default:i((()=>[d(c(e.item.cfav),1)])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-2a6b3d9b"]]);const z=H({name:"UniGridItem",inject:["grid"],props:{index:{type:Number,default:0}},data:()=>({column:0,showBorder:!0,square:!0,highlight:!0,left:0,top:0,openNum:2,width:0,borderColor:"#e5e5e5"}),created(){this.column=this.grid.column,this.showBorder=this.grid.showBorder,this.square=this.grid.square,this.highlight=this.grid.highlight,this.top=0===this.hor?this.grid.hor:this.hor,this.left=0===this.ver?this.grid.ver:this.ver,this.borderColor=this.grid.borderColor,this.grid.children.push(this),this.width=this.grid.width},beforeDestroy(){this.grid.children.forEach(((e,t)=>{e===this&&this.grid.children.splice(t,1)}))},methods:{_onClick(){this.grid.change({detail:{index:this.index}})}}},[["render",function(e,a,r,o,d,c){const h=u;return d.width?(t(),s(h,{key:0,style:_("width:"+d.width+";"+(d.square?"height:"+d.width:"")),class:"uni-grid-item"},{default:i((()=>[n(h,{class:l([{"uni-grid-item--border":d.showBorder,"uni-grid-item--border-top":d.showBorder&&r.index<d.column,"uni-highlight":d.highlight},"uni-grid-item__box"]),style:_({"border-right-color":d.borderColor,"border-bottom-color":d.borderColor,"border-top-color":d.borderColor}),onClick:c._onClick},{default:i((()=>[b(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style","onClick"])])),_:3},8,["style"])):w("",!0)}],["__scopeId","data-v-0810a0ad"]]);const A=H({name:"UniGrid",emits:["change"],props:{column:{type:Number,default:3},showBorder:{type:Boolean,default:!0},borderColor:{type:String,default:"#D2D2D2"},square:{type:Boolean,default:!0},highlight:{type:Boolean,default:!0}},provide(){return{grid:this}},data:()=>({elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,width:0}),created(){this.children=[]},mounted(){this.$nextTick((()=>{this.init()}))},methods:{init(){setTimeout((()=>{this._getSize((e=>{this.children.forEach(((t,s)=>{t.width=e}))}))}),50)},change(e){this.$emit("change",e)},_getSize(e){k().in(this).select(`#${this.elId}`).boundingClientRect().exec((t=>{this.width=parseInt((t[0].width-1)/this.column)+"px",e(this.width)}))}}},[["render",function(e,a,r,o,d,c){const h=u;return t(),s(h,{class:"uni-grid-wrap"},{default:i((()=>[n(h,{id:d.elId,ref:"uni-grid",class:l(["uni-grid",{"uni-grid--border":r.showBorder}]),style:_({"border-left-color":r.borderColor})},{default:i((()=>[b(e.$slots,"default",{},void 0,!0)])),_:3},8,["id","class","style"])])),_:3})}],["__scopeId","data-v-257e8068"]]);let E;E="http://localhost:3000";const L=new class{request(e,t,s){return new Promise(((i,a)=>{y({url:"http://localhost:3000"+e,timeout:1e4,method:t,data:s,sslVerify:!1,success:e=>{i(e.data)},fail:a})}))}get(e,t){return this.request(e,"GET",t)}post(e,t){return this.request(e,"POST",t)}};const N=["pop","new","sell"];function T(){let e={};return N.forEach((t=>{e[t]={page:0,list:[]}})),e}const G=C("home",{state:()=>({banners:[],recommends:[],goodsList:T()}),actions:{async fetchHomeMultiData(){const e=await L.get("/home/multidata");let t=e.data.banner.list||[],s=e.data.recommend.list||[];this.banners=t,this.recommends=s},async fetchHomeData(e,t){let s=await function(e,t){return L.get("/home/data",{type:e,page:t})}(e,t),i=s.data.list||[];this.goodsList[e].list.push(...i),this.goodsList[e].page=t}}}),U=H({__name:"home-banner",props:{banners:{type:Array,default:()=>[]}},emits:["bannerItemClick"],setup(e,{emit:l}){const d=l;return(l,c)=>{const h=f,u=v,m=I;return t(),s(m,{class:"banner","indicator-dots":!0,"indicator-active-color":"#ff8198",autoplay:!0,interval:3e3,duration:1e3},{default:i((()=>[(t(!0),a(r,null,o(e.banners,((e,a)=>(t(),s(u,{key:a,onClick:t=>(e=>{const t=e.link;d("bannerItemClick",t)})(e)},{default:i((()=>[n(h,{class:"image",src:e.image,mode:"widthFix"},null,8,["src"])])),_:2},1032,["onClick"])))),128))])),_:1})}}},[["__scopeId","data-v-46aa07c0"]]),O=H({__name:"home-recommend",props:{recommends:{type:Array,default:()=>[]}},emits:["itemClick"],setup(e,{emit:l}){const h=l;return(l,m)=>{const g=f,p=u;return t(),s(p,{class:"recommend"},{default:i((()=>[(t(!0),a(r,null,o(e.recommends,((e,a)=>(t(),s(p,{class:"recommend-item",key:a,onClick:t=>(e=>{h("itemClick",e)})(e)},{default:i((()=>[n(g,{class:"image",src:e.image,mode:"widthFix"},null,8,["src"]),n(p,{class:"title"},{default:i((()=>[d(c(e.title),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})}}},[["__scopeId","data-v-362da498"]]);const P=H({},[["render",function(e,a){const r=f,o=u;return t(),s(o,{class:"popular"},{default:i((()=>[n(r,{class:"image",src:"/assets/recommend_bg-daMyIl-8.jpg",mode:"widthFix"})])),_:1})}],["__scopeId","data-v-42af236a"]]),R={__name:"home",setup(e){const l=G(),{banners:d,recommends:c,goodsList:h}=x(l),m=()=>{l.fetchHomeMultiData(),l.fetchHomeData("pop",1),l.fetchHomeData("sell",1),l.fetchHomeData("new",1)};j((()=>{m()})),S((()=>{m()}));const g=e=>{q({url:"/pages/webview/webview?link="+e})},p=e=>{q({url:"/pages/webview/webview?link="+e.link})},f=(e,t)=>{console.log("点击了",e,t)},_=e=>{console.log("详情页面",e),q({url:"/pages/detail/detail?iid="+e.iid})};return(e,l)=>{const m=$(B("tab-control"),F),b=$(B("grid-view-item"),M),w=$(B("uni-grid-item"),z),k=$(B("uni-grid"),A),y=u;return t(),s(y,{class:"content"},{default:i((()=>[n(U,{banners:D(d),onBannerItemClick:g},null,8,["banners"]),n(O,{recommends:D(c),onItemClick:p},null,8,["recommends"]),n(P),n(m,{titles:["流行","新款","精选"],onItemClick:f}),n(k,{column:2,"border-color":"#ff8198",square:!1,showBorder:!1,highlight:!1},{default:i((()=>[(t(!0),a(r,null,o(D(h).pop.list,((e,a)=>(t(),s(w,{key:a},{default:i((()=>[n(b,{item:e,onItemClick:_},null,8,["item"])])),_:2},1024)))),128))])),_:1})])),_:1})}}};export{R as default};
