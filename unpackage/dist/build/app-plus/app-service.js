if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((n=>t.resolve(e()).then((()=>n))),(n=>t.resolve(e()).then((()=>{throw n}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";function t(e,t,...n){uni.__log__?uni.__log__(e,t,...n):console[e].apply(console,[...n,t])}function n(e,t){return"string"==typeof e?t:e}const o=t=>(n,o=e.getCurrentInstance())=>{!e.isInSSRComponentSetup&&e.injectHook(t,n,o)},i=o("onShow"),r=o("onLoad"),a=(e,t)=>{const n=e.__vccOpts||e;for(const[o,i]of t)n[o]=i;return n},s=a({__name:"tab-control",props:{titles:{type:Array,default:()=>[]}},emits:["itemClick"],setup(t,{emit:n}){const o=n,i=e.ref(0);return(n,r)=>(e.openBlock(),e.createElementBlock("view",{class:"tab-control"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.titles,((t,n)=>(e.openBlock(),e.createElementBlock("view",{key:t,class:e.normalizeClass(["item",i.value===n?"active":""]),onClick:e=>((e,t)=>{i.value=t,o("itemClick",e,t)})(t,n)},[e.createElementVNode("text",{class:"title"},e.toDisplayString(t),1)],10,["onClick"])))),128))]))}},[["__scopeId","data-v-b2252c7c"]]),c=a({__name:"grid-view-item",props:{item:{type:Object,default:()=>{}}},emits:["itemClick"],setup(t,{emit:n}){const o=t,i=n,r=()=>{i("itemClick",o.item)};return(n,o)=>(e.openBlock(),e.createElementBlock("view",{class:"goods-item",onClick:r},[e.createElementVNode("image",{"lazy-load":!0,class:"image",src:t.item.show.img,mode:"scaleToFill"},null,8,["src"]),e.createElementVNode("view",{class:"desc-info"},[e.createElementVNode("view",{class:"title"},e.toDisplayString(t.item.title),1),e.createElementVNode("view",{class:"info"},[e.createElementVNode("text",{class:"price"},"￥"+e.toDisplayString(t.item.price),1),e.createElementVNode("image",{class:"icon",src:"/static/images/common/favor.png",mode:""}),e.createElementVNode("text",{class:"favorNum"},e.toDisplayString(t.item.cfav),1)])])]))}},[["__scopeId","data-v-655f84e6"]]);const l=a({name:"UniGridItem",inject:["grid"],props:{index:{type:Number,default:0}},data:()=>({column:0,showBorder:!0,square:!0,highlight:!0,left:0,top:0,openNum:2,width:0,borderColor:"#e5e5e5"}),created(){this.column=this.grid.column,this.showBorder=this.grid.showBorder,this.square=this.grid.square,this.highlight=this.grid.highlight,this.top=0===this.hor?this.grid.hor:this.hor,this.left=0===this.ver?this.grid.ver:this.ver,this.borderColor=this.grid.borderColor,this.grid.children.push(this),this.width=this.grid.width},beforeDestroy(){this.grid.children.forEach(((e,t)=>{e===this&&this.grid.children.splice(t,1)}))},methods:{_onClick(){this.grid.change({detail:{index:this.index}})}}},[["render",function(t,n,o,i,r,a){return r.width?(e.openBlock(),e.createElementBlock("view",{key:0,style:e.normalizeStyle("width:"+r.width+";"+(r.square?"height:"+r.width:"")),class:"uni-grid-item"},[e.createElementVNode("view",{class:e.normalizeClass([{"uni-grid-item--border":r.showBorder,"uni-grid-item--border-top":r.showBorder&&o.index<r.column,"uni-highlight":r.highlight},"uni-grid-item__box"]),style:e.normalizeStyle({"border-right-color":r.borderColor,"border-bottom-color":r.borderColor,"border-top-color":r.borderColor}),onClick:n[0]||(n[0]=(...e)=>a._onClick&&a._onClick(...e))},[e.renderSlot(t.$slots,"default",{},void 0,!0)],6)],4)):e.createCommentVNode("",!0)}],["__scopeId","data-v-2511947d"]]);const d=a({name:"UniGrid",emits:["change"],props:{column:{type:Number,default:3},showBorder:{type:Boolean,default:!0},borderColor:{type:String,default:"#D2D2D2"},square:{type:Boolean,default:!0},highlight:{type:Boolean,default:!0}},provide(){return{grid:this}},data:()=>({elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,width:0}),created(){this.children=[]},mounted(){this.$nextTick((()=>{this.init()}))},methods:{init(){setTimeout((()=>{this._getSize((e=>{this.children.forEach(((t,n)=>{t.width=e}))}))}),50)},change(e){this.$emit("change",e)},_getSize(e){uni.createSelectorQuery().in(this).select(`#${this.elId}`).boundingClientRect().exec((t=>{this.width=parseInt((t[0].width-1)/this.column)+"px",e(this.width)}))}}},[["render",function(t,n,o,i,r,a){return e.openBlock(),e.createElementBlock("view",{class:"uni-grid-wrap"},[e.createElementVNode("view",{id:r.elId,ref:"uni-grid",class:e.normalizeClass(["uni-grid",{"uni-grid--border":o.showBorder}]),style:e.normalizeStyle({"border-left-color":o.borderColor})},[e.renderSlot(t.$slots,"default",{},void 0,!0)],14,["id"])])}],["__scopeId","data-v-a6acbddc"]]);
/*!
   * pinia v2.1.7
   * (c) 2023 Eduardo San Martin Morote
   * @license MIT
   */
let u;const p=e=>u=e,m=Symbol();function h(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var f,g;(g=f||(f={})).direct="direct",g.patchObject="patch object",g.patchFunction="patch function";const y=()=>{};function v(t,n,o,i=y){t.push(n);const r=()=>{const e=t.indexOf(n);e>-1&&(t.splice(e,1),i())};return!o&&e.getCurrentScope()&&e.onScopeDispose(r),r}function w(e,...t){e.slice().forEach((e=>{e(...t)}))}const _=e=>e();function k(t,n){t instanceof Map&&n instanceof Map&&n.forEach(((e,n)=>t.set(n,e))),t instanceof Set&&n instanceof Set&&n.forEach(t.add,t);for(const o in n){if(!n.hasOwnProperty(o))continue;const i=n[o],r=t[o];h(r)&&h(i)&&t.hasOwnProperty(o)&&!e.isRef(i)&&!e.isReactive(i)?t[o]=k(r,i):t[o]=i}return t}const b=Symbol();const{assign:B}=Object;function C(t,n,o={},i,r,a){let s;const c=B({actions:{}},o),l={deep:!0};let d,u,m,g=[],C=[];const E=i.state.value[t];let S;function A(n){let o;d=u=!1,"function"==typeof n?(n(i.state.value[t]),o={type:f.patchFunction,storeId:t,events:m}):(k(i.state.value[t],n),o={type:f.patchObject,payload:n,storeId:t,events:m});const r=S=Symbol();e.nextTick().then((()=>{S===r&&(d=!0)})),u=!0,w(g,o,i.state.value[t])}a||E||(i.state.value[t]={}),e.ref({});const I=a?function(){const{state:e}=o,t=e?e():{};this.$patch((e=>{B(e,t)}))}:y;function V(e,n){return function(){p(i);const o=Array.from(arguments),r=[],a=[];function s(e){r.push(e)}function c(e){a.push(e)}let l;w(C,{args:o,name:e,store:x,after:s,onError:c});try{l=n.apply(this&&this.$id===t?this:x,o)}catch(d){throw w(a,d),d}return l instanceof Promise?l.then((e=>(w(r,e),e))).catch((e=>(w(a,e),Promise.reject(e)))):(w(r,l),l)}}const N={_p:i,$id:t,$onAction:v.bind(null,C),$patch:A,$reset:I,$subscribe(n,o={}){const r=v(g,n,o.detached,(()=>a())),a=s.run((()=>e.watch((()=>i.state.value[t]),(e=>{("sync"===o.flush?u:d)&&n({storeId:t,type:f.direct,events:m},e)}),B({},l,o))));return r},$dispose:function(){s.stop(),g=[],C=[],i._s.delete(t)}},x=e.reactive(N);i._s.set(t,x);const D=(i._a&&i._a.runWithContext||_)((()=>i._e.run((()=>(s=e.effectScope()).run(n)))));for(const p in D){const n=D[p];if(e.isRef(n)&&($=n,!e.isRef($)||!$.effect)||e.isReactive(n))a||(!E||h(P=n)&&P.hasOwnProperty(b)||(e.isRef(n)?n.value=E[p]:k(n,E[p])),i.state.value[t][p]=n);else if("function"==typeof n){const e=V(p,n);D[p]=e,c.actions[p]=n}}var P,$;return B(x,D),B(e.toRaw(x),D),Object.defineProperty(x,"$state",{get:()=>i.state.value[t],set:e=>{A((t=>{B(t,e)}))}}),i._p.forEach((e=>{B(x,s.run((()=>e({store:x,app:i._a,pinia:i,options:c}))))})),E&&a&&o.hydrate&&o.hydrate(x.$state,E),d=!0,u=!0,x}let E;E="http://192.168.1.115:3000";const S=new class{request(e,t,n){return new Promise(((o,i)=>{uni.request({url:"http://192.168.1.115:3000"+e,timeout:1e4,method:t,data:n,sslVerify:!1,success:e=>{o(e.data)},fail:i})}))}get(e,t){return this.request(e,"GET",t)}post(e,t){return this.request(e,"POST",t)}};const A=["pop","new","sell"];function I(){let e={};return A.forEach((t=>{e[t]={page:0,list:[]}})),e}const V=function(t,n,o){let i,r;const a="function"==typeof n;function s(t,o){const s=e.hasInjectionContext();(t=t||(s?e.inject(m,null):null))&&p(t),(t=u)._s.has(i)||(a?C(i,n,r,t):function(t,n,o,i){const{state:r,actions:a,getters:s}=n,c=o.state.value[t];let l;l=C(t,(function(){c||(o.state.value[t]=r?r():{});const n=e.toRefs(o.state.value[t]);return B(n,a,Object.keys(s||{}).reduce(((n,i)=>(n[i]=e.markRaw(e.computed((()=>{p(o);const e=o._s.get(t);return s[i].call(e,e)}))),n)),{}))}),n,o,0,!0)}(i,r,t));return t._s.get(i)}return"string"==typeof t?(i=t,r=a?o:n):(r=t,i=t.id),s.$id=i,s}("home",{state:()=>({banners:[],recommends:[],goodsList:I()}),actions:{async fetchHomeMultiData(){const e=await S.get("/home/multidata");let t=e.data.banner.list||[],n=e.data.recommend.list||[];this.banners=t,this.recommends=n},async fetchHomeData(e,t){let n=await function(e,t){return S.get("/home/data",{type:e,page:t})}(e,t),o=n.data.list||[];this.goodsList[e].list.push(...o),this.goodsList[e].page=t}}}),N=a({__name:"home-banner",props:{banners:{type:Array,default:()=>[]}},emits:["bannerItemClick"],setup(t,{emit:n}){const o=n;return(n,i)=>(e.openBlock(),e.createElementBlock("swiper",{class:"banner","indicator-dots":!0,"indicator-active-color":"#ff8198",autoplay:!0,interval:3e3,duration:1e3},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.banners,((t,n)=>(e.openBlock(),e.createElementBlock("swiper-item",{key:n,onClick:e=>(e=>{const t=e.link;o("bannerItemClick",t)})(t)},[e.createElementVNode("image",{class:"image",src:t.image,mode:"widthFix"},null,8,["src"])],8,["onClick"])))),128))]))}},[["__scopeId","data-v-46aa07c0"]]),x=a({__name:"home-recommend",props:{recommends:{type:Array,default:()=>[]}},emits:["itemClick"],setup(t,{emit:n}){const o=n;return(n,i)=>(e.openBlock(),e.createElementBlock("view",{class:"recommend"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.recommends,((t,n)=>(e.openBlock(),e.createElementBlock("view",{class:"recommend-item",key:n,onClick:e=>(e=>{o("itemClick",e)})(t)},[e.createElementVNode("image",{class:"image",src:t.image,mode:"widthFix"},null,8,["src"]),e.createElementVNode("view",{class:"title"},e.toDisplayString(t.title),1)],8,["onClick"])))),128))]))}},[["__scopeId","data-v-362da498"]]);const D=a({},[["render",function(t,n){return e.openBlock(),e.createElementBlock("view",{class:"popular"},[e.createElementVNode("image",{class:"image",src:"/static/images/home/recommend_bg.jpg",mode:"widthFix"})])}],["__scopeId","data-v-42af236a"]]),P={__name:"home",setup(o){const a=V(),{banners:u,recommends:p,goodsList:m}=function(t){{t=e.toRaw(t);const n={};for(const o in t){const i=t[o];(e.isRef(i)||e.isReactive(i))&&(n[o]=e.toRef(t,o))}return n}}(a),h=()=>{a.fetchHomeMultiData(),a.fetchHomeData("pop",1),a.fetchHomeData("sell",1),a.fetchHomeData("new",1)};r((()=>{h()})),i((()=>{h()}));const f=e=>{uni.navigateTo({url:"/pages/webview/webview?link="+e})},g=e=>{uni.navigateTo({url:"/pages/webview/webview?link="+e.link})},y=(e,n)=>{t("log","at pages/home/home.vue:71","点击了",e,n)},v=e=>{t("log","at pages/home/home.vue:74","详情页面",e),uni.navigateTo({url:"/pages/detail/detail?iid="+e.iid})};return(t,o)=>{const i=n(e.resolveDynamicComponent("tab-control"),s),r=n(e.resolveDynamicComponent("grid-view-item"),c),a=n(e.resolveDynamicComponent("uni-grid-item"),l),h=n(e.resolveDynamicComponent("uni-grid"),d);return e.openBlock(),e.createElementBlock("view",{class:"content"},[e.createVNode(N,{banners:e.unref(u),onBannerItemClick:f},null,8,["banners"]),e.createVNode(x,{recommends:e.unref(p),onItemClick:g},null,8,["recommends"]),e.createVNode(D),e.createVNode(i,{titles:["流行","新款","精选"],onItemClick:y}),e.createVNode(h,{column:2,"border-color":"#ff8198",square:!1,showBorder:!1,highlight:!1},{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(m).pop.list,((t,n)=>(e.openBlock(),e.createBlock(a,{key:n},{default:e.withCtx((()=>[e.createVNode(r,{item:t,onItemClick:v},null,8,["item"])])),_:2},1024)))),128))])),_:1})])}}};const $=a({},[["render",function(t,n){return e.openBlock(),e.createElementBlock("view")}]]);const j=a({},[["render",function(t,n){return e.openBlock(),e.createElementBlock("view")}]]),R={__name:"detail",props:{iid:{type:String,default:""}},setup:n=>(r((e=>{t("log","at pages/detail/detail.vue:19","detail-- onLoad",e)})),(t,o)=>(e.openBlock(),e.createElementBlock("view",null,e.toDisplayString(n.iid),1)))};const O=a({},[["render",function(t,n){return e.openBlock(),e.createElementBlock("view")}]]),F={__name:"webview",props:{link:{type:String,default:""}},setup:t=>(n,o)=>(e.openBlock(),e.createElementBlock("web-view",{src:t.link},null,8,["src"]))};__definePage("pages/home/home",P),__definePage("pages/category/category",$),__definePage("pages/profile/profile",j),__definePage("pages/detail/detail",R),__definePage("pages/cart/cart",O),__definePage("pages/webview/webview",F);const U={onLaunch:function(){t("log","at App.vue:4","App Launch")},onShow:function(){t("log","at App.vue:7","App Show")},onHide:function(){t("log","at App.vue:10","App Hide")}};const{app:q,Vuex:L,Pinia:T}=function(){const t=e.createVueApp(U);return t.use(function(){const t=e.effectScope(!0),n=t.run((()=>e.ref({})));let o=[],i=[];const r=e.markRaw({install(e){p(r),r._a=e,e.provide(m,r),e.config.globalProperties.$pinia=r,i.forEach((e=>o.push(e))),i=[]},use(e){return this._a?o.push(e):i.push(e),this},_p:o,_a:null,_e:t,_s:new Map,state:n});return r}()),{app:t}}();uni.Vuex=L,uni.Pinia=T,q.provide("__globalStyles",__uniConfig.styles),q._component.mpType="app",q._component.render=()=>{},q.mount("#app")}(Vue);
